extern func malloc(long) : any *
extern func free(any *) : void

func using_rc(int ct) : int
{
    int sum = 0
    for int i = 0; i < ct; i = i + 1
    {
        int^ j = new int
        j^ = i
        sum = sum + j^
    }

    return sum
}

func using_malloc(int ct) : int
{
    int sum = 0
    for int i = 0; i < ct; i = i + 1
    {
        int* j = malloc(4)
        j^ = i
        sum = sum + j^
        free(j)
    }

    return sum
}

func main() : int
{
    long start = __egl_millis()
    puts using_malloc(100000000)
    puts __egl_millis() - start

    start = __egl_millis()
    puts using_rc(100000000)
    puts __egl_millis() - start


    return 0
}

